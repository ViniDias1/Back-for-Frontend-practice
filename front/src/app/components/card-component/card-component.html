<!DOCTYPE html>

<div class="container">
  <!-- Mensagem de carregamento -->
  @if (loading) {
    <p class="loading-message">Recarregando painéis...</p>
  }

  <!-- Mensagem de erro -->
  @if (errorMessage) {
    <p class="error-message">{{ errorMessage }}</p>
  }

  <!-- Painéis filtrados (exibidos após busca) -->
  @if (filteredPaineis.length > 0) {
    @for (item of filteredPaineis; track item.id) {
      <div class="panel-card">
        <h3>{{ item.title }}</h3>
        <p>{{ item.description }}</p>

        @if (item.link && item.link !== 'Não disponível') {
          <p>
            <strong>Link:</strong>
            <a [href]="item.link" target="_blank" class="panel-link">
              Acessar Painel
            </a>
          </p>
        }

        <div class="panel-details">
          <p>
            <strong>Acesso Internet:</strong>
            <span [ngClass]="item.internet ? 'internet-yes' : 'internet-no'">
              {{ item.internet ? 'Sim' : 'Não' }}
            </span>
          </p>
          <p>
            <strong>Autenticação Necessária:</strong>
            {{ item.authentication ? 'Sim' : 'Não' }}
          </p>
          <p>
            <strong>Embutível:</strong>
            {{ item.embedded ? 'Sim' : 'Não' }}
          </p>
        </div>
      </div>
    }
  }

  <!-- Lista completa de painéis (sem filtro) -->
  @else if (sabiaPaineis.length > 0) {
    <div class="panels-list">
      @for (painel of sabiaPaineis; track painel.id) {
        <div class="panel-card">
          <h3>{{ painel.title }}</h3>

          <!-- Imagem do painel (opcional) -->
          <!--
          @if (painel.image) {
            <div class="panel-image">
              <img
                [src]="'http://localhost:3000/api/files/' + painel.collectionId + '/' + painel.id + '/' + painel.image"
                alt="{{ painel.title }}"
              />
            </div>
          }
          -->

          <p class="panel-description">{{ painel.description }}</p>

          @if (painel.link && painel.link !== 'Não disponível') {
            <p>
              <strong>Link:</strong>
              <a [href]="painel.link" target="_blank" class="panel-link">
                Acessar Painel
              </a>
            </p>
          }

          <div class="panel-details">
            <p>
              <strong>Acesso Internet:</strong>
              <span [ngClass]="painel.internet ? 'internet-yes' : 'internet-no'">
                {{ painel.internet ? 'Sim' : 'Não' }}
              </span>
            </p>
            <p>
              <strong>Autenticação Necessária:</strong>
              {{ painel.authentication ? 'Sim' : 'Não' }}
            </p>
            <p>
              <strong>Embutível:</strong>
              {{ painel.embedded ? 'Sim' : 'Não' }}
            </p>
          </div>
        </div>
      }
    </div>
  }
</div>
